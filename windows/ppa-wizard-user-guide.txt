PPA Desktop – Local Use Guide (for Windows users)
===============================================

What is the PPA Desktop?
-------------------
The PPA Desktop is a small program that runs on your own computer.  
It opens in your web browser and helps you create a Patient Pathway Analysis (PPA).

You do not need to know anything about Docker, Java, or R.  
The installer and the “PPA Desktop (Start)” shortcut do the technical work for you.


1. Before you start
-------------------
System requirements:
- Windows 10 or 11 (64‑bit)
- At least 8 GB of memory is recommended
- Internet connection the first time you run PPA Desktop (to download components)

PPA Desktop uses **Docker Desktop** in the background.  
If Docker is not yet installed, the installer will offer to download it for you.


2. Installing PPA Desktop
------------------------
1. Double‑click the file **ppa-wizard-setup.exe**.
2. Follow the steps on screen.
3. If Docker Desktop is not installed:
   - A message will appear that PPA Desktop needs Docker Desktop.
   - Choose **Yes** to download and start the Docker Desktop installer.
   - Complete the Docker Desktop installation and start Docker Desktop once.
   - Run **ppa-wizard-setup.exe** again to finish the PPA Desktop installation.
4. When the installer is finished you will have:
   - A Start Menu folder **PPA Desktop**
   - Shortcuts:
     - **PPA Desktop (Start)**
     - **PPA Desktop (Stop)**
   - Optionally a desktop icon “PPA Desktop”.


3. Starting and stopping PPA Desktop
-----------------------------------
To start:
1. Make sure **Docker Desktop** is running (the whale icon is visible in the taskbar).
2. Click **Start → PPA Desktop → PPA Desktop (Start)**  
   or double‑click the **PPA Desktop** desktop icon.
3. A PowerShell window will open. The first time this can take a few minutes:
   - The program prepares a local database.
   - It starts three background components (application, database, R).
4. Your default browser will open at: **http://localhost:8080**.  
   This is the PPA Desktop home page.

To stop:
1. Click **Start → PPA Desktop → PPA Desktop (Stop)**.
2. This will stop all background components.


4. Quick check: is everything running?
--------------------------------------
- If the browser does not open automatically, open it yourself and go to  
  **http://localhost:8080**.
- If the page does not load:
  - Make sure Docker Desktop is running.
  - Try **PPA Desktop (Start)** again.
  - If it still fails, contact your support person and mention any error text you see.


5. Basic PPA workflow
---------------------
The top of the page shows the main steps:

1. **Select PPA Metrics**  
   - Choose an existing PPA or create a new one.  
   - Give the PPA a clear name (for example “Country 2024 National PPA”).

2. **Provide Data**  
   - Upload the data files you received for the PPA (CSV or Stata .dta).  
   - After uploading, each file will appear in a list of “My Data Sources”.

3. **Identify Variables**  
   - Tell the system which columns in your data are:
     - Facility type
     - Health sector
     - Geography (region / province, etc.)

4. **Map Facilities**  
   - Define sectors and levels (for example: Public L1, Public L2, Private L1).  
   - Map the values from your data (e.g. “District hospital”) to these sectors/levels.

5. **Map Geographies**  
   - Define the subnational units that should appear in the PPA  
     (for example: regions or provinces).  
   - Map the region names or codes from your data to these units.

6. **Create Output**  
   - Go to the last step “Create Output”.  
   - Select your PPA in the drop‑down list.  
   - Click **Generate New Output** and wait until a new row appears in the table.
   - Use the **Download** button to get a ZIP file with:
     - An Excel file with the PPA tables.
     - Images of the charts (for some PPAs).
   - Use the **eye / preview** control to open visualisations on screen.  
     You can select “National” or one of the regions, depending on your PPA.


6. Where are my files stored?
-----------------------------
PPA Desktop keeps its internal files in a special working folder that is managed by
Docker. You normally do not need to open this folder.

When you click **Download** in step 6, your browser saves a ZIP file to your usual
“Downloads” folder. You can copy or rename that file as you like.


7. Getting help
---------------
If you run into problems:
- Note any error message you see on the screen.
- If possible, take a screenshot.
- Contact your technical contact person or PPA support team and share:
  - What you were trying to do (for example: “Generate output for country X – National PPA”).
  - The exact error text or screenshot.


